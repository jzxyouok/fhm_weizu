<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.weizu.addressLook">
	
	<!-- 新增-->
	<insert id="inserAddressLook" parameterType="addressLookBean">
		insert into weizu_address_book(
			 user_name,
			 mobile_phone,
			 sex,
			 create_time
		) values (
			#{userName},	
			#{mobilePhone},	
			#{sex},
			now()		
		)
	</insert>
	
	<!-- 删除-->
	<delete id="deleteAddressLook" >
		delete from weizu_address_book where id = #{id}
	</delete>
	
	<!-- 修改 -->
	<update id="updateAddressLook" parameterType="addressLookBean">
		update  weizu_address_book
			set 
				user_name = #{userName},
				mobile_phone = #{mobilePhone},
				sex = #{sex}
			where 
				id = #{id}
	</update>
	
	<!-- 查找通讯录  -->
	<select id="findAddressLookById" resultType="addressLookBean" parameterType="addressLookBean">
		select
		   id,
		   user_name as userName,
		   mobile_phone as mobilePhone,
		   sex,
		   create_time as createTime
		from weizu_address_book 
		where 
			id = #{id}
		<if test="userName != null">
			and user_name = #{userName}
		</if>
	</select>
	
	<!-- 查找通讯录  -->
	<select id="findAddressLookByCondition" resultType="addressLookBean" parameterType="addressLookBean">
		select
		   id,
		   user_name as userName,
		   mobile_phone as mobilePhone,
		   sex,
		   create_time as createTime
		from weizu_address_book 
		where 
			user_name = #{userName}
		<if test="mobilePhone != null">
			and mobile_phone = #{mobilePhone}
		</if>
	</select>
	
	<!-- 获取所有通讯录信息 -->
	<select id="getAllAddressLook" resultType="addressLookBean">
		select
		   id,
		   user_name as userName,
		   mobile_phone as mobilePhone,
		   sex,
		   create_time as createTime
		from weizu_address_book 
	</select>
	
	<!-- 列表后台查询页面 -->
	<select id="getAllAddressLooklistPage" parameterType="page" resultType="pd">
		select
		   id,
		   user_name as userName,
		   mobile_phone as mobilePhone,
		   sex,
		   create_time as createTime
		from weizu_address_book 
		where 1 = 1		
		<if test="pd.USERNAME != null and pd.USERNAME != ''"><!-- 用户名检索 -->
			and user_name LIKE CONCAT(CONCAT('%', #{pd.USERNAME}),'%')
		</if>
		<if test="pd.lastLoginStart!=null and pd.lastLoginStart!=''"><!-- 到期时间检索 -->
			and create_time &gt;= #{pd.lastLoginStart} 
		</if>
		<if test="pd.lastLoginEnd!=null and pd.lastLoginEnd!=''"><!-- 到期时间检索 -->
			and create_time &lt;= #{pd.lastLoginEnd} 
		</if>
	</select>
	
</mapper>